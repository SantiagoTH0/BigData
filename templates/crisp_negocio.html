{% extends 'base.html' %}

{% block title %}Comprensi贸n del Negocio 路 CRISP-DM{% endblock %}

{% block content %}
<section class="section-banner">
  <div class="section-banner-overlay"></div>
  <div class="section-banner-content">
    <div>
      <h1>Comprensi贸n del Negocio</h1>
      <p class="lead">Alinear los objetivos estrat茅gicos y operativos en la gesti贸n de emergencias.</p>
      <p class="lead">Pasa el cursor sobre cada tarjeta para conocer los detalles ampliados.</p>
    </div>
  </div>
</section>

<div class="row g-3 mt-4 text-center">
  <!-- OBJETIVOS ESTRATGICOS -->
  <div class="col-12 col-md-6 col-lg-4">
    <div class="p-3 stage-card h-100" data-info="objetivos-info">
      <div class="stage-icon"><i class="bi bi-bullseye"></i></div>
      <div class="stage-title mt-2">Objetivos Estrat茅gicos</div>
      <p class="stage-desc mb-0">Reducir tiempos de llegada, optimizar rutas y aumentar la cobertura.</p>
    </div>
  </div>

  <!-- INDICADORES -->
  <div class="col-12 col-md-6 col-lg-4">
    <div class="p-3 stage-card h-100" data-info="indicadores-info">
      <div class="stage-icon"><i class="bi bi-speedometer2"></i></div>
      <div class="stage-title mt-2">Indicadores (KPIs)</div>
      <p class="stage-desc mb-0">Medici贸n de desempe帽o, efectividad operativa y cumplimiento de protocolos.</p>
    </div>
  </div>

  <!-- ACTORES CLAVE -->
  <div class="col-12 col-md-6 col-lg-4">
    <div class="p-3 stage-card h-100" data-info="actores-info">
      <div class="stage-icon"><i class="bi bi-people"></i></div>
      <div class="stage-title mt-2">Actores Clave</div>
      <p class="stage-desc mb-0">Instituciones involucradas en la atenci贸n y gesti贸n de emergencias.</p>
    </div>
  </div>
</div>

<!-- VENTANA EMERGENTE -->
<div id="info-window" class="info-window">
  <div class="info-content">
    <span class="close-btn">&times;</span>
    <div id="info-text"></div>
  </div>
</div>

<style>
/* Tarjetas */
.stage-card {
  background: #181717;
  border-radius: 16px;
  transition: transform 0.3s ease, box-shadow 0.3s ease;
  cursor: pointer;
  box-shadow: 0 2px 6px rgba(0,0,0,0.1);
}
.stage-card:hover {
  transform: translateY(-6px);
  box-shadow: 0 8px 18px rgba(0,0,0,0.2);
}

/* Ventana emergente */
.info-window {
  display: none;
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,0.6);
  justify-content: center;
  align-items: center;
  z-index: 999;
  animation: fadeIn 0.3s ease forwards;
}
@keyframes fadeIn {
  from {opacity: 0;}
  to {opacity: 1;}
}
.info-content {
  background: #fefefe;
  border-radius: 16px;
  max-width: 650px;
  padding: 30px 35px;
  text-align: left;
  box-shadow: 0 10px 30px rgba(0,0,0,0.25);
  position: relative;
  animation: slideUp 0.4s ease;
}
@keyframes slideUp {
  from {transform: translateY(40px); opacity: 0;}
  to {transform: translateY(0); opacity: 1;}
}
.close-btn {
  position: absolute;
  top: 12px;
  right: 18px;
  font-size: 1.5rem;
  cursor: pointer;
  color: #333;
  transition: color 0.2s;
}
.close-btn:hover { color: #007bff; }

#info-text {
  margin-top: 10px;
  color: #333;
  font-size: 1rem;
  line-height: 1.6;
}
</style>

<script>
const infoTexts = {
  "objetivos-info": `
    <h4> Objetivos Estrat茅gicos</h4>
    <p>El prop贸sito fundamental de la fase de Comprensi贸n del Negocio es definir con claridad los objetivos operativos y estrat茅gicos que guiar谩n todo el proceso anal铆tico. 
    En el contexto de la gesti贸n de veh铆culos de emergencia, los objetivos buscan maximizar la eficiencia de respuesta ante incidentes cr铆ticos y reducir los tiempos de atenci贸n.</p>
    <ul>
      <li><strong>Reducir tiempos de llegada:</strong> mediante optimizaci贸n de rutas, priorizaci贸n din谩mica y an谩lisis de tr谩fico en tiempo real.</li>
      <li><strong>Optimizar recursos:</strong> mediante la asignaci贸n inteligente de unidades seg煤n la demanda geogr谩fica y temporal.</li>
      <li><strong>Incrementar cobertura:</strong> garantizando presencia operativa en 谩reas de alto riesgo o dif铆cil acceso.</li>
      <li><strong>Mejorar seguridad:</strong> asegurando protocolos de actuaci贸n y comunicaci贸n entre entidades.</li>
      <li><strong>Planificar de forma predictiva:</strong> utilizando datos hist贸ricos y patrones recurrentes para anticipar emergencias.</li>
  `,

  "indicadores-info": `
    <h4> Indicadores de Desempe帽o (KPIs)</h4>
    <p>Los indicadores son las m茅tricas que permiten evaluar el grado de cumplimiento de los objetivos establecidos. En el proyecto de respuesta a emergencias, los KPIs est谩n dise帽ados para medir eficiencia, efectividad y calidad operativa.</p>
    <ul>
      <li><strong>Tiempo promedio de respuesta:</strong> intervalo entre la alerta y la llegada de la unidad al sitio del incidente.</li>
      <li><strong>Tasa de 茅xito:</strong> porcentaje de incidentes atendidos dentro de los tiempos y condiciones establecidos.</li>
      <li><strong>Disponibilidad de unidades:</strong> proporci贸n de veh铆culos operativos respecto al total de la flota.</li>
      <li><strong>Cumplimiento de protocolos:</strong> nivel de adherencia a los procedimientos de despacho, comunicaci贸n y atenci贸n.</li>
      <li><strong>Coste operativo por evento:</strong> eficiencia econ贸mica basada en el uso de combustible, mantenimiento y personal.</li>
    </ul>
    <p>El seguimiento constante de estos indicadores permite ajustar estrategias, priorizar recursos y establecer l铆neas base de mejora continua en los procesos de atenci贸n de emergencias.</p>
  `,

  "actores-info": `
    <h4> Actores Clave</h4>
    <p>El ecosistema de respuesta a emergencias involucra a una red de instituciones y actores que deben coordinarse para garantizar una atenci贸n efectiva y oportuna. Cada actor cumple un rol estrat茅gico en la cadena de valor del proceso operativo.</p>
    <ul>
      <li><strong>Bomberos:</strong> atenci贸n inmediata de incendios, rescates y emergencias t茅cnicas.</li>
      <li><strong>Ambulancias y personal m茅dico:</strong> asistencia prehospitalaria y traslado seguro de pacientes.</li>
      <li><strong>Polic铆a y tr谩nsito:</strong> control de v铆as, aseguramiento del 谩rea y acompa帽amiento operativo.</li>
      <li><strong>Centros de control:</strong> monitoreo en tiempo real, priorizaci贸n de eventos y coordinaci贸n interinstitucional.</li>
    </ul>
    <p>La colaboraci贸n entre estos actores, apoyada por sistemas integrados de informaci贸n y an谩lisis de datos, reduce los tiempos de respuesta y mejora la capacidad de decisi贸n operativa en escenarios de alta complejidad.</p>
  `
};

// Mostrar ventana al pasar el mouse
document.querySelectorAll('.stage-card').forEach(card => {
  card.addEventListener('mouseenter', e => {
    const id = card.getAttribute('data-info');
    const infoWindow = document.getElementById('info-window');
    document.getElementById('info-text').innerHTML = infoTexts[id];
    infoWindow.style.display = 'flex';
  });
});

// Cerrar ventana
document.querySelector('.close-btn').addEventListener('click', () => {
  document.getElementById('info-window').style.display = 'none';
});

// Cerrar al hacer clic fuera
document.getElementById('info-window').addEventListener('click', e => {
  if (e.target.id === 'info-window') {
    e.currentTarget.style.display = 'none';
  }
});
</script>

{% endblock %}
